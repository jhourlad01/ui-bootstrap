<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bootstrap UI Demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Open+Sans&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
      transition: all 0.3s ease;
    }

    .light-theme {
      background: linear-gradient(to right, #e0e0e0, #ffffff);
      color: #000;
    }

    .dark-theme, .dark-theme .modal-content {
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      color: #fff;
    }

    .navbar {
      transition: background-color 0.3s ease;
    }

    .light-theme .navbar {
      background: #ffffff;
    }

    .dark-theme .navbar {
      background: #0d1117;
    }

    .navbar-brand {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.6rem;
    }

    .light-theme .navbar-brand,
    .light-theme .nav-link {
      color: #000 !important;
    }

    .dark-theme .navbar-brand,
    .dark-theme .nav-link {
      color: #00ffe1 !important;
    }

    .btn-custom {
      font-weight: bold;
      border: none;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .light-theme .btn-custom {
      background: #007bff;
      color: #fff;
    }

    .dark-theme .btn-custom {
      background: #00ffe1;
      color: #000;
    }

    .carousel-item img {
      height: 400px;
      object-fit: cover;
    }

    .carousel-caption {
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      padding: 1rem;
      border-radius: 1rem;
    }

    .text-end {
      text-align: right;
    }

    .light-theme .table thead {
      background-color: #007bff;
      color: #fff;
    }

    .dark-theme .table thead {
      background-color: transparent;
      color: #000;
    }

    .light-theme .table {
      background-color: #fff;
      color: #000;
    }

    .dark-theme .table {
      background-color: transparent;
      color: #fff;
    }

    .dark-theme .table td,
    .dark-theme .table th {
      border-color: #444;
      background-color: #1e1e2f !important;
      color: #fff !important;
    }

    .dark-theme .accordion-button {
      background-color: #1e1e2f;
      color: #fff;
    }

    .dark-theme .accordion-button:not(.collapsed) {
      background-color: #2c2c3e;
      color: #00ffe1;
    }

    .dark-theme .accordion-body {
      background-color: #1e1e2f;
      color: #fff;
    }

    .dark-theme .accordion-item {
      border: 1px solid #333;
    }

    @media (max-width: 768px) {
      .carousel-item img {
        height: 250px;
      }
    }

    .crypto-icon {
      width: 24px;
      height: 24px;
      vertical-align: middle;
      margin-right: 8px;
    }
  </style>
</head>

<body class="">
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Bootstrap UI Demo</a>
      <button class="navbar-toggler bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav me-3">
          <li class="nav-item">
            <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#signUpModal">Sign Up</a>
          </li>
        </ul>
        <button id="themeToggle" class="btn btn-custom">Dark Mode</button>
      </div>
    </div>
  </nav>

  <div id="heroCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="./images/1.jpeg" class="d-block w-100" alt="Bitcoin" />
        <div class="carousel-caption d-none d-md-block">
          <h5>Bitcoin Automation</h5>
          <p>Monitor BTC trades in real time</p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="./images/2.jpeg" class="d-block w-100" alt="Ethereum" />
        <div class="carousel-caption d-none d-md-block">
          <h5>Ethereum Analysis</h5>
          <p>Visualize smart contract activity</p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="./images/3.jpeg" class="d-block w-100" alt="Solana" />
        <div class="carousel-caption d-none d-md-block">
          <h5>Solana Performance</h5>
          <p>Track high-frequency trading on SOL</p>
        </div>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>

  <div class="container-fluid">
    <div class="row mb-4">
      <div class="col-md-3">
        <div class="card text-bg-primary mb-3">
          <div class="card-body">
            <h5 class="card-title">Overview</h5>
            <p class="card-text">General stats and summaries.</p>
            <a href="#" class="btn btn-light btn-sm">View</a>
          </div>
        </div>
        <div class="card text-bg-success mb-3">
          <div class="card-body">
            <h5 class="card-title">Bots</h5>
            <p class="card-text">Manage your trading bots.</p>
            <a href="#" class="btn btn-light btn-sm">Manage</a>
          </div>
        </div>
        <div class="card text-bg-warning mb-3">
          <div class="card-body">
            <h5 class="card-title">Analytics</h5>
            <p class="card-text">Detailed charts and KPIs.</p>
            <a href="#" class="btn btn-light btn-sm">Analyze</a>
          </div>
        </div>
        <div class="card text-bg-danger mb-3">
          <div class="card-body">
            <h5 class="card-title">Settings</h5>
            <p class="card-text">Configure system options.</p>
            <a href="#" class="btn btn-light btn-sm">Edit</a>
          </div>
        </div>
      </div>

      <div class="col-md-9">
        <div class="accordion" id="dashboardSections">
          <div class="accordion-item">
            <h2 class="accordion-header" id="chartsHeading">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#chartsCollapse">
                Market Charts
              </button>
            </h2>
            <div id="chartsCollapse" class="accordion-collapse collapse show">
              <div class="accordion-body">
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <canvas id="chart1"></canvas>
                  </div>
                  <div class="col-md-6 mb-3">
                    <canvas id="chart2"></canvas>
                  </div>
                  <div class="col-md-6 mb-3">
                    <canvas id="chart3"></canvas>
                  </div>
                  <div class="col-md-6 mb-3">
                    <canvas id="chart4"></canvas>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header" id="assetsHeading">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#assetsCollapse">
                Top 50 Crypto Assets (Coinbase Listed)
              </button>
            </h2>
            <div id="assetsCollapse" class="accordion-collapse collapse show">
              <div class="accordion-body">
                <div class="table-responsive">
                  <table class="table table-hover" id="assetTable">
                    <thead>
                      <tr>
                        <th class="text-end">#</th>
                        <th>Symbol</th>
                        <th>Name</th>
                        <th class="text-end">Price USD</th>
                        <th class="text-end">Market Cap</th>
                        <th class="text-end">24h Volume</th>
                        <th class="text-end">24h Change</th>
                      </tr>
                    </thead>
                    <tbody></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header" id="tradesHeading">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#tradesCollapse">
                Recent Trades
              </button>
            </h2>
            <div id="tradesCollapse" class="accordion-collapse collapse">
              <div class="accordion-body">
                <p>Real-time trade data coming soon.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sign Up Modal -->
  <div class="modal fade" id="signUpModal" tabindex="-1" aria-labelledby="signUpModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <form class="modal-content" id="signUpForm" novalidate>
        <div class="modal-header">
          <h5 class="modal-title" id="signUpModalLabel">Sign Up</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="emailInput" class="form-label">Email address</label>
            <input type="email" class="form-control" id="emailInput" required />
            <div class="invalid-feedback">Please enter a valid email.</div>
          </div>

          <div class="mb-3">
            <label for="passwordInput" class="form-label">Password</label>
            <input type="password" class="form-control" id="passwordInput" minlength="6" required />
            <div class="invalid-feedback">Password must be at least 6 characters.</div>
          </div>

          <div class="mb-3">
            <label for="confirmInput" class="form-label">Re-Type</label>
            <input type="confirm" class="form-control" id="confirmInput" minlength="6" required />
            <div class="invalid-feedback">Password must be at least 6 characters.</div>
          </div>

          <div class="form-check mb-3">
            <input type="checkbox" class="form-check-input" id="termsCheck" required />
            <label class="form-check-label" for="termsCheck">Agree to terms</label>
            <div class="invalid-feedback">You must agree before submitting.</div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Register</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
  <script>
    (() => {
      const body = document.body;
      const themeToggleBtn = document.getElementById('themeToggle');

      function setTheme(theme) {
        if (theme === 'dark') {
          body.classList.add('dark-theme');
          body.classList.remove('light-theme');
          themeToggleBtn.textContent = 'Light Mode';
        } else {
          body.classList.add('light-theme');
          body.classList.remove('dark-theme');
          themeToggleBtn.textContent = 'Dark Mode';
        }
        localStorage.setItem('theme', theme);
      }

      const savedTheme = localStorage.getItem('theme') || 'light';
      setTheme(savedTheme);

      themeToggleBtn.addEventListener('click', () => {
        const currentTheme = body.classList.contains('dark-theme') ? 'dark' : 'light';
        setTheme(currentTheme === 'dark' ? 'light' : 'dark');
      });

      // Chart.js examples
      const ctx1 = document.getElementById('chart1').getContext('2d');
      const chart1 = new Chart(ctx1, {
        type: 'line',
        data: {
          labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
          datasets: [{
            label: 'BTC Price',
            data: [30000, 31000, 32000, 31500, 32500, 33000, 33500],
            borderColor: 'rgb(255, 99, 132)',
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            tension: 0.3,
            fill: true,
            pointRadius: 3,
          }]
        },
        options: {
          responsive: true,
          scales: { y: { beginAtZero: false } }
        }
      });

      const ctx2 = document.getElementById('chart2').getContext('2d');
      const chart2 = new Chart(ctx2, {
        type: 'bar',
        data: {
          labels: ['BTC', 'ETH', 'SOL', 'ADA', 'XRP'],
          datasets: [{
            label: 'Market Cap (Billion USD)',
            data: [600, 300, 40, 50, 20],
            backgroundColor: [
              '#f7931a',
              '#627eea',
              '#00ffa3',
              '#0033ad',
              '#346aa9'
            ]
          }]
        },
        options: {
          responsive: true,
          scales: { y: { beginAtZero: true } }
        }
      });

      const ctx3 = document.getElementById('chart3').getContext('2d');
      const chart3 = new Chart(ctx3, {
        type: 'pie',
        data: {
          labels: ['BTC', 'ETH', 'Others'],
          datasets: [{
            data: [50, 30, 20],
            backgroundColor: ['#f7931a', '#627eea', '#bbb']
          }]
        },
        options: { responsive: true }
      });

      const ctx4 = document.getElementById('chart4').getContext('2d');
      const chart4 = new Chart(ctx4, {
        type: 'doughnut',
        data: {
          labels: ['Long', 'Short'],
          datasets: [{
            data: [70, 30],
            backgroundColor: ['#28a745', '#dc3545']
          }]
        },
        options: { responsive: true }
      });

      // Fetch Top 50 Coinbase Listed Assets from CoinGecko and populate table
      const tableBody = document.querySelector('#assetTable tbody');

      async function fetchAssets() {
        try {
          const res = await fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=50&page=1&sparkline=false&price_change_percentage=24h');
          if (!res.ok) throw new Error('Network response was not ok');
          const data = await res.json();

          tableBody.innerHTML = '';
          data.forEach((asset, index) => {
            if (!asset.platforms || Object.keys(asset.platforms).length === 0) {
              const priceChange = asset.price_change_percentage_24h?.toFixed(2) || '0.00';
              const priceChangeClass = priceChange >= 0 ? 'text-success' : 'text-danger';
              const priceChangeSymbol = priceChange >= 0 ? '▲' : '▼';
              tableBody.innerHTML += `
                <tr>
                  <td class="text-end">${index + 1}</td>
                  <td><img src="${asset.image}" alt="${asset.symbol}" class="crypto-icon"/>${asset.symbol.toUpperCase()}</td>
                  <td>${asset.name}</td>
                  <td class="text-end">$${asset.current_price.toLocaleString()}</td>
                  <td class="text-end">$${asset.market_cap.toLocaleString()}</td>
                  <td class="text-end">$${asset.total_volume.toLocaleString()}</td>
                  <td class="text-end ${priceChangeClass}">${priceChangeSymbol} ${priceChange}%</td>
                </tr>
              `;
            }
          });
        } catch (error) {
          tableBody.innerHTML = '<tr><td colspan="7" class="text-center text-danger">Failed to load asset data.</td></tr>';
        }
      }

      fetchAssets();

      // Sign Up form validation
      const signUpForm = document.getElementById('signUpForm');
      signUpForm.addEventListener('submit', e => {
        e.preventDefault();
        if (!signUpForm.checkValidity()) {
          e.stopPropagation();
          signUpForm.classList.add('was-validated');
          return;
        }
        // Here you would handle form submission, e.g. via AJAX
        alert('Sign Up successful (demo)');
        const modal = bootstrap.Modal.getInstance(document.getElementById('signUpModal'));
        modal.hide();
        signUpForm.reset();
        signUpForm.classList.remove('was-validated');
      });
    })();
  </script>
</body>

</html>
